<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]--><!--[if gt IE 8]><!--><html xmlns="http://www.w3.org/1999/xhtml" class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en" style=""><!--<![endif]--><head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Selectors — Scrapy 0.22.0 documentation</title>
  

  
  

  
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet" type="text/css" />

  
  

    <script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://ssl.google-analytics.com/ga.js"></script><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'0.22.0',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>

    

  

  
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/sphinx_rtd_theme.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="top" title="Scrapy 0.22.0 documentation" href="../index.html" />
        <link rel="next" title="Item Loaders" href="loaders.html" />
        <link rel="prev" title="Spiders" href="spiders.html" />
 
<!-- RTD Extra Head -->



  
  <!-- 
  Always link to the latest version, as canonical.
  http://docs.readthedocs.org/en/latest/canonical.html
  -->
  <link rel="canonical" href="http://doc.scrapy.org/en/latest/topics/selectors.html" />
  

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "scrapy",
    version: "0.22",
    language: "en",
    page: "topics/selectors",
    theme: "sphinx_rtd_theme",
    docroot: "/docs/",
    api_host: "http://readthedocs.org"
  }
  // Old variables
  var doc_version = "0.22";
  var doc_slug = "scrapy";
  var page_name = "topics/selectors";
  var html_theme = "sphinx_rtd_theme";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->


<!-- User Analytics Code -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10231918-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- End User Analytics Code -->

<!-- end RTD <extrahead> -->


  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document" style="">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side"><div class="wy-side-scroll"><div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Scrapy</a>
        <div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html"><span class="toctree-expand"></span>Scrapy at a glance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#pick-a-website">Pick a website</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#define-the-data-you-want-to-scrape">Define the data you want to scrape</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#write-a-spider-to-extract-the-data">Write a Spider to extract the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#run-the-spider-to-extract-the-data">Run the spider to extract the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#review-scraped-data">Review scraped data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#what-else">What else?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/overview.html#what-s-next">What’s next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html"><span class="toctree-expand"></span>Installation guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html#pre-requisites">Pre-requisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html#installing-scrapy">Installing Scrapy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/install.html#platform-specific-installation-notes">Platform specific installation notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial.html"><span class="toctree-expand"></span>Scrapy Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial.html#creating-a-project">Creating a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial.html#defining-our-item">Defining our Item</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial.html#our-first-spider">Our first Spider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial.html#storing-the-scraped-data">Storing the scraped data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/tutorial.html#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../intro/examples.html">Examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="commands.html"><span class="toctree-expand"></span>Command line tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="commands.html#default-structure-of-scrapy-projects">Default structure of Scrapy projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html#using-the-scrapy-tool">Using the <tt class="docutils literal"><span class="pre">scrapy</span></tt> tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html#available-tool-commands">Available tool commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html#custom-project-commands">Custom project commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="items.html"><span class="toctree-expand"></span>Items</a><ul>
<li class="toctree-l2"><a class="reference internal" href="items.html#declaring-items">Declaring Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="items.html#item-fields">Item Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="items.html#working-with-items">Working with Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="items.html#extending-items">Extending Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="items.html#item-objects">Item objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="items.html#field-objects">Field objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spiders.html"><span class="toctree-expand"></span>Spiders</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spiders.html#spider-arguments">Spider arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="spiders.html#built-in-spiders-reference">Built-in spiders reference</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><span class="toctree-expand"></span>Selectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-selectors">Using selectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-scrapy.selector">Built-in Selectors reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="loaders.html"><span class="toctree-expand"></span>Item Loaders</a><ul>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#using-item-loaders-to-populate-items">Using Item Loaders to populate items</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#input-and-output-processors">Input and Output processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#declaring-item-loaders">Declaring Item Loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#declaring-input-and-output-processors">Declaring Input and Output Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#item-loader-context">Item Loader Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#itemloader-objects">ItemLoader objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#reusing-and-extending-item-loaders">Reusing and extending Item Loaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="loaders.html#module-scrapy.contrib.loader.processor">Available built-in processors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shell.html"><span class="toctree-expand"></span>Scrapy shell</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shell.html#launch-the-shell">Launch the shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html#using-the-shell">Using the shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html#example-of-shell-session">Example of shell session</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html#invoking-the-shell-from-spiders-to-inspect-responses">Invoking the shell from spiders to inspect responses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="item-pipeline.html"><span class="toctree-expand"></span>Item Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="item-pipeline.html#writing-your-own-item-pipeline">Writing your own item pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="item-pipeline.html#item-pipeline-example">Item pipeline example</a></li>
<li class="toctree-l2"><a class="reference internal" href="item-pipeline.html#activating-an-item-pipeline-component">Activating an Item Pipeline component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="feed-exports.html"><span class="toctree-expand"></span>Feed exports</a><ul>
<li class="toctree-l2"><a class="reference internal" href="feed-exports.html#serialization-formats">Serialization formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="feed-exports.html#storages">Storages</a></li>
<li class="toctree-l2"><a class="reference internal" href="feed-exports.html#storage-uri-parameters">Storage URI parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="feed-exports.html#storage-backends">Storage backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="feed-exports.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="link-extractors.html"><span class="toctree-expand"></span>Link Extractors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="link-extractors.html#module-scrapy.contrib.linkextractors">Built-in link extractors reference</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging.html"><span class="toctree-expand"></span>Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="logging.html#log-levels">Log levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#how-to-set-the-log-level">How to set the log level</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#how-to-log-messages">How to log messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#logging-from-spiders">Logging from Spiders</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#module-scrapy.log">scrapy.log module</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html#logging-settings">Logging settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stats.html"><span class="toctree-expand"></span>Stats Collection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stats.html#common-stats-collector-uses">Common Stats Collector uses</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html#available-stats-collectors">Available Stats Collectors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="email.html"><span class="toctree-expand"></span>Sending e-mail</a><ul>
<li class="toctree-l2"><a class="reference internal" href="email.html#quick-example">Quick example</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html#mailsender-class-reference">MailSender class reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html#mail-settings">Mail settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="telnetconsole.html"><span class="toctree-expand"></span>Telnet Console</a><ul>
<li class="toctree-l2"><a class="reference internal" href="telnetconsole.html#how-to-access-the-telnet-console">How to access the telnet console</a></li>
<li class="toctree-l2"><a class="reference internal" href="telnetconsole.html#available-variables-in-the-telnet-console">Available variables in the telnet console</a></li>
<li class="toctree-l2"><a class="reference internal" href="telnetconsole.html#telnet-console-usage-examples">Telnet console usage examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="telnetconsole.html#telnet-console-signals">Telnet Console signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="telnetconsole.html#telnet-settings">Telnet settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webservice.html"><span class="toctree-expand"></span>Web Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webservice.html#web-service-resources">Web service resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="webservice.html#web-service-settings">Web service settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="webservice.html#writing-a-web-service-resource">Writing a web service resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="webservice.html#examples-of-web-service-resources">Examples of web service resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="webservice.html#example-of-web-service-client">Example of web service client</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html"><span class="toctree-expand"></span>Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-does-scrapy-compare-to-beautifulsoup-or-lxml">How does Scrapy compare to BeautifulSoup or lxml?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-python-versions-does-scrapy-support">What Python versions does Scrapy support?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#does-scrapy-work-with-python-3">Does Scrapy work with Python 3?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#did-scrapy-steal-x-from-django">Did Scrapy “steal” X from Django?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#does-scrapy-work-with-http-proxies">Does Scrapy work with HTTP proxies?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-scrape-an-item-with-attributes-in-different-pages">How can I scrape an item with attributes in different pages?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#scrapy-crashes-with-importerror-no-module-named-win32api">Scrapy crashes with: ImportError: No module named win32api</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-simulate-a-user-login-in-my-spider">How can I simulate a user login in my spider?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#does-scrapy-crawl-in-breadth-first-or-depth-first-order">Does Scrapy crawl in breadth-first or depth-first order?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#my-scrapy-crawler-has-memory-leaks-what-can-i-do">My Scrapy crawler has memory leaks. What can I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-make-scrapy-consume-less-memory">How can I make Scrapy consume less memory?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#can-i-use-basic-http-authentication-in-my-spiders">Can I use Basic HTTP Authentication in my spiders?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#why-does-scrapy-download-pages-in-english-instead-of-my-native-language">Why does Scrapy download pages in English instead of my native language?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#where-can-i-find-some-example-scrapy-projects">Where can I find some example Scrapy projects?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#can-i-run-a-spider-without-creating-a-project">Can I run a spider without creating a project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-get-filtered-offsite-request-messages-how-can-i-fix-them">I get “Filtered offsite request” messages. How can I fix them?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-is-the-recommended-way-to-deploy-a-scrapy-crawler-in-production">What is the recommended way to deploy a Scrapy crawler in production?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#can-i-use-json-for-large-exports">Can I use JSON for large exports?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#can-i-return-twisted-deferreds-from-signal-handlers">Can I return (Twisted) deferreds from signal handlers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-does-the-response-status-code-999-means">What does the response status code 999 means?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#can-i-call-pdb-set-trace-from-my-spiders-to-debug-them">Can I call <tt class="docutils literal"><span class="pre">pdb.set_trace()</span></tt> from my spiders to debug them?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#simplest-way-to-dump-all-my-scraped-items-into-a-json-csv-xml-file">Simplest way to dump all my scraped items into a JSON/CSV/XML file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-s-this-huge-cryptic-viewstate-parameter-used-in-some-forms">What’s this huge cryptic <tt class="docutils literal"><span class="pre">__VIEWSTATE</span></tt> parameter used in some forms?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#what-s-the-best-way-to-parse-big-xml-csv-data-feeds">What’s the best way to parse big XML/CSV data feeds?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#does-scrapy-manage-cookies-automatically">Does Scrapy manage cookies automatically?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-see-the-cookies-being-sent-and-received-from-scrapy">How can I see the cookies being sent and received from Scrapy?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-instruct-a-spider-to-stop-itself">How can I instruct a spider to stop itself?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-can-i-prevent-my-scrapy-bot-from-getting-banned">How can I prevent my Scrapy bot from getting banned?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#should-i-use-spider-arguments-or-settings-to-configure-my-spider">Should I use spider arguments or settings to configure my spider?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-m-scraping-a-xml-document-and-my-xpath-selector-doesn-t-return-any-items">I’m scraping a XML document and my XPath selector doesn’t return any items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-m-getting-an-error-cannot-import-name-crawler">I’m getting an error: “cannot import name crawler”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="debug.html"><span class="toctree-expand"></span>Debugging Spiders</a><ul>
<li class="toctree-l2"><a class="reference internal" href="debug.html#parse-command">Parse Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug.html#scrapy-shell">Scrapy Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug.html#open-in-browser">Open in browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="debug.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html"><span class="toctree-expand"></span>Spiders Contracts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contracts.html#custom-contracts">Custom Contracts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="practices.html"><span class="toctree-expand"></span>Common Practices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="practices.html#run-scrapy-from-a-script">Run Scrapy from a script</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices.html#running-multiple-spiders-in-the-same-process">Running multiple spiders in the same process</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices.html#distributed-crawls">Distributed crawls</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices.html#avoiding-getting-banned">Avoiding getting banned</a></li>
<li class="toctree-l2"><a class="reference internal" href="practices.html#dynamic-creation-of-item-classes">Dynamic Creation of Item Classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="broad-crawls.html"><span class="toctree-expand"></span>Broad Crawls</a><ul>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#increase-concurrency">Increase concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#reduce-log-level">Reduce log level</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#disable-cookies">Disable cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#disable-retries">Disable retries</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#reduce-download-timeout">Reduce download timeout</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#disable-redirects">Disable redirects</a></li>
<li class="toctree-l2"><a class="reference internal" href="broad-crawls.html#enable-crawling-of-ajax-crawlable-pages">Enable crawling of “Ajax Crawlable Pages”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firefox.html"><span class="toctree-expand"></span>Using Firefox for scraping</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firefox.html#caveats-with-inspecting-the-live-browser-dom">Caveats with inspecting the live browser DOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="firefox.html#useful-firefox-add-ons-for-scraping">Useful Firefox add-ons for scraping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="firebug.html"><span class="toctree-expand"></span>Using Firebug for scraping</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firebug.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="firebug.html#getting-links-to-follow">Getting links to follow</a></li>
<li class="toctree-l2"><a class="reference internal" href="firebug.html#extracting-the-data">Extracting the data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="leaks.html"><span class="toctree-expand"></span>Debugging memory leaks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="leaks.html#common-causes-of-memory-leaks">Common causes of memory leaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="leaks.html#debugging-memory-leaks-with-trackref">Debugging memory leaks with <tt class="docutils literal"><span class="pre">trackref</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="leaks.html#debugging-memory-leaks-with-guppy">Debugging memory leaks with Guppy</a></li>
<li class="toctree-l2"><a class="reference internal" href="leaks.html#leaks-without-leaks">Leaks without leaks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="images.html"><span class="toctree-expand"></span>Downloading Item Images</a><ul>
<li class="toctree-l2"><a class="reference internal" href="images.html#using-the-images-pipeline">Using the Images Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#usage-example">Usage example</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#enabling-your-images-pipeline">Enabling your Images Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#images-storage">Images Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#additional-features">Additional features</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#module-scrapy.contrib.pipeline.images">Implementing your custom Images Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html#custom-images-pipeline-example">Custom Images pipeline example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ubuntu.html">Ubuntu packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="scrapyd.html">Scrapyd</a></li>
<li class="toctree-l1"><a class="reference internal" href="autothrottle.html"><span class="toctree-expand"></span>AutoThrottle extension</a><ul>
<li class="toctree-l2"><a class="reference internal" href="autothrottle.html#design-goals">Design goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="autothrottle.html#how-it-works">How it works</a></li>
<li class="toctree-l2"><a class="reference internal" href="autothrottle.html#throttling-algorithm">Throttling algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="autothrottle.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html"><span class="toctree-expand"></span>Jobs: pausing and resuming crawls</a><ul>
<li class="toctree-l2"><a class="reference internal" href="jobs.html#job-directory">Job directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs.html#how-to-use-it">How to use it</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs.html#keeping-persistent-state-between-batches">Keeping persistent state between batches</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobs.html#persistence-gotchas">Persistence gotchas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="djangoitem.html"><span class="toctree-expand"></span>DjangoItem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="djangoitem.html#using-djangoitem">Using DjangoItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="djangoitem.html#djangoitem-caveats">DjangoItem caveats</a></li>
<li class="toctree-l2"><a class="reference internal" href="djangoitem.html#django-settings-set-up">Django settings set up</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html"><span class="toctree-expand"></span>Architecture overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#components">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#data-flow">Data flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#event-driven-networking">Event-driven networking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="downloader-middleware.html"><span class="toctree-expand"></span>Downloader Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="downloader-middleware.html#activating-a-downloader-middleware">Activating a downloader middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="downloader-middleware.html#writing-your-own-downloader-middleware">Writing your own downloader middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="downloader-middleware.html#built-in-downloader-middleware-reference">Built-in downloader middleware reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spider-middleware.html"><span class="toctree-expand"></span>Spider Middleware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spider-middleware.html#activating-a-spider-middleware">Activating a spider middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="spider-middleware.html#writing-your-own-spider-middleware">Writing your own spider middleware</a></li>
<li class="toctree-l2"><a class="reference internal" href="spider-middleware.html#built-in-spider-middleware-reference">Built-in spider middleware reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html"><span class="toctree-expand"></span>Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#extension-settings">Extension settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#loading-activating-extensions">Loading &amp; activating extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#available-enabled-and-disabled-extensions">Available, enabled and disabled extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#disabling-an-extension">Disabling an extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#writing-your-own-extension">Writing your own extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html#built-in-extensions-reference">Built-in extensions reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html"><span class="toctree-expand"></span>Core API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#crawler-api">Crawler API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-scrapy.settings">Settings API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-scrapy.signalmanager">Signals API</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#stats-collector-api">Stats Collector API</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="request-response.html"><span class="toctree-expand"></span>Requests and Responses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#request-objects">Request objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#request-meta-special-keys">Request.meta special keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#request-subclasses">Request subclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#response-objects">Response objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="request-response.html#response-subclasses">Response subclasses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="settings.html"><span class="toctree-expand"></span>Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="settings.html#designating-the-settings">Designating the settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#populating-the-settings">Populating the settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#how-to-access-settings">How to access settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#rationale-for-setting-names">Rationale for setting names</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html#built-in-settings-reference">Built-in settings reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="signals.html"><span class="toctree-expand"></span>Signals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="signals.html#deferred-signal-handlers">Deferred signal handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="signals.html#module-scrapy.signals">Built-in signals reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html"><span class="toctree-expand"></span>Exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html#built-in-exceptions-reference">Built-in Exceptions reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="exporters.html"><span class="toctree-expand"></span>Item Exporters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="exporters.html#using-item-exporters">Using Item Exporters</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporters.html#serialization-of-item-fields">Serialization of item fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporters.html#built-in-item-exporters-reference">Built-in Item Exporters reference</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html"><span class="toctree-expand"></span>Release notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2014-01-17">0.22.0 (released 2014-01-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-12-09">0.20.2 (released 2013-12-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-11-28">0.20.1 (released 2013-11-28)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-11-08">0.20.0 (released 2013-11-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-10-10">0.18.4 (released 2013-10-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-10-03">0.18.3 (released 2013-10-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-09-03">0.18.2 (released 2013-09-03)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-08-27">0.18.1 (released 2013-08-27)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-08-09">0.18.0 (released 2013-08-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-05-30">0.16.5 (released 2013-05-30)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2013-01-23">0.16.4 (released 2013-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2012-12-07">0.16.3 (released 2012-12-07)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2012-11-09">0.16.2 (released 2012-11-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2012-10-26">0.16.1 (released 2012-10-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#released-2012-10-18">0.16.0 (released 2012-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id2">0.14.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id3">0.14.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id4">0.14.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id5">0.14.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id6">0.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id7">0.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id8">0.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id11">0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id14">0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../news.html#id15">0.7</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html"><span class="toctree-expand"></span>Contributing to Scrapy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#reporting-bugs">Reporting bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#writing-patches">Writing patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#submitting-patches">Submitting patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#coding-style">Coding style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#scrapy-contrib">Scrapy Contrib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#documentation-policies">Documentation policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#tests">Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html"><span class="toctree-expand"></span>Versioning and API Stability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html#id1">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../versioning.html#api-stability">API Stability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../experimental/index.html"><span class="toctree-expand"></span>Experimental features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../experimental/index.html#add-commands-using-external-libraries">Add commands using external libraries</a></li>
</ul>
</li>
</ul>

        
      </div><div id="rtd-qrgz55p6l" class="ethical-rtd ethical-dark-theme"></div></div>
      

      
       
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../index.html">Scrapy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> »</li>
      
    <li>Selectors</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/scrapy/scrapy/blob/0.22/docs/topics/selectors.rst" class="icon icon-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr />
</div>
          <div role="main">
            
  <div class="section" id="selectors">
<span id="topics-selectors"></span><h1>Selectors<a class="headerlink" href="#selectors" title="Permalink to this headline">¶</a></h1>
<p>When you’re scraping web pages, the most common task you need to perform is
to extract data from the HTML source. There are several libraries available to
achieve this:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> is a very popular screen scraping library among Python
programmers which constructs a Python object based on the structure of the
HTML code and also deals with bad markup reasonably well, but it has one
drawback: it’s slow.</li>
<li><a class="reference external" href="http://codespeak.net/lxml/">lxml</a> is a XML parsing library (which also parses HTML) with a pythonic
API based on <a class="reference external" href="http://docs.python.org/library/xml.etree.elementtree.html">ElementTree</a> (which is not part of the Python standard
library).</li>
</ul>
</div></blockquote>
<p>Scrapy comes with its own mechanism for extracting data. They’re called
selectors because they “select” certain parts of the HTML document specified
either by <a class="reference external" href="http://www.w3.org/TR/xpath">XPath</a> or <a class="reference external" href="http://www.w3.org/TR/selectors">CSS</a> expressions.</p>
<p><a class="reference external" href="http://www.w3.org/TR/xpath">XPath</a> is a language for selecting nodes in XML documents, which can also be
used with HTML. <a class="reference external" href="http://www.w3.org/TR/selectors">CSS</a> is a language for applying styles to HTML documents. It
defines selectors to associate those styles with specific HTML elements.</p>
<p>Scrapy selectors are built over the <a class="reference external" href="http://codespeak.net/lxml/">lxml</a> library, which means they’re very
similar in speed and parsing accuracy.</p>
<p>This page explains how selectors work and describes their API which is very
small and simple, unlike the <a class="reference external" href="http://codespeak.net/lxml/">lxml</a> API which is much bigger because the
<a class="reference external" href="http://codespeak.net/lxml/">lxml</a> library can be used for many other tasks, besides selecting markup
documents.</p>
<p>For a complete reference of the selectors API see
<a class="reference internal" href="#topics-selectors-ref"><em>Selector reference</em></a></p>
<div class="section" id="using-selectors">
<h2>Using selectors<a class="headerlink" href="#using-selectors" title="Permalink to this headline">¶</a></h2>
<div class="section" id="constructing-selectors">
<h3>Constructing selectors<a class="headerlink" href="#constructing-selectors" title="Permalink to this headline">¶</a></h3>
<p>Scrapy selectors are instances of <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> class
constructed by passing a <cite>Response</cite> object as first argument, the response’s
body is what they’re going to be “selecting”:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">scrapy.spider</span> <span class="kn">import</span> <span class="n">Spider</span>
<span class="kn">from</span> <span class="nn">scrapy.selector</span> <span class="kn">import</span> <span class="n">Selector</span>

<span class="k">class</span> <span class="nc">MySpider</span><span class="p">(</span><span class="n">Spider</span><span class="p">):</span>
    <span class="c"># ...</span>
    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="c"># Using XPath query</span>
        <span class="k">print</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//p'</span><span class="p">)</span>
        <span class="c"># Using CSS query</span>
        <span class="k">print</span> <span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'p'</span><span class="p">)</span>
        <span class="c"># Nesting queries</span>
        <span class="k">print</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@foo="bar"]'</span><span class="p">)</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'span#bold'</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>Using selectors<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>To explain how to use the selectors we’ll use the <cite>Scrapy shell</cite> (which
provides interactive testing) and an example page located in the Scrapy
documentation server:</p>
<blockquote>
<div><a class="reference external" href="http://doc.scrapy.org/en/latest/_static/selectors-sample1.html">http://doc.scrapy.org/en/latest/_static/selectors-sample1.html</a></div></blockquote>
<p id="topics-selectors-htmlcode">Here’s its HTML code:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;base</span> <span class="na">href=</span><span class="s">'http://example.com/'</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;title&gt;</span>Example website<span class="nt">&lt;/title&gt;</span>
 <span class="nt">&lt;/head&gt;</span>
 <span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'images'</span><span class="nt">&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'image1.html'</span><span class="nt">&gt;</span>Name: My image 1 <span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;img</span> <span class="na">src=</span><span class="s">'image1_thumb.jpg'</span> <span class="nt">/&gt;&lt;/a&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'image2.html'</span><span class="nt">&gt;</span>Name: My image 2 <span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;img</span> <span class="na">src=</span><span class="s">'image2_thumb.jpg'</span> <span class="nt">/&gt;&lt;/a&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'image3.html'</span><span class="nt">&gt;</span>Name: My image 3 <span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;img</span> <span class="na">src=</span><span class="s">'image3_thumb.jpg'</span> <span class="nt">/&gt;&lt;/a&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'image4.html'</span><span class="nt">&gt;</span>Name: My image 4 <span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;img</span> <span class="na">src=</span><span class="s">'image4_thumb.jpg'</span> <span class="nt">/&gt;&lt;/a&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">'image5.html'</span><span class="nt">&gt;</span>Name: My image 5 <span class="nt">&lt;br</span> <span class="nt">/&gt;&lt;img</span> <span class="na">src=</span><span class="s">'image5_thumb.jpg'</span> <span class="nt">/&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>First, let’s open the shell:</p>
<div class="highlight-sh"><div class="highlight"><pre>scrapy shell http://doc.scrapy.org/en/latest/_static/selectors-sample1.html
</pre></div>
</div>
<p>Then, after the shell loads, you’ll have a selector already instantiated and
ready to use in <tt class="docutils literal"><span class="pre">sel</span></tt> shell variable.</p>
<p>Since we’re dealing with HTML, the selector will automatically use an HTML parser.</p>
<p>So, by looking at the <a class="reference internal" href="#topics-selectors-htmlcode"><em>HTML code</em></a> of that
page, let’s construct an XPath (using an HTML selector) for selecting the text
inside the title tag:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//title/text()'</span><span class="p">)</span>
<span class="go">[&lt;Selector (text) xpath=//title/text()&gt;]</span>
</pre></div>
</div>
<p>As you can see, the <tt class="docutils literal"><span class="pre">.xpath()</span></tt> method returns an
<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> instance, which is a list of new
selectors. This API can be used quickly for extracting nested data.</p>
<p>To actually extract the textual data, you must call the selector <tt class="docutils literal"><span class="pre">.extract()</span></tt>
method, as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//title/text()'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'Example website']</span>
</pre></div>
</div>
<p>Notice that CSS selectors can select text or attribute nodes using CSS3
pseudo-elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'title::text'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'Example website']</span>
</pre></div>
</div>
<p>Now we’re going to get the base URL and some image links:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//base/@href'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'http://example.com/']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'base::attr(href)'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'http://example.com/']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//a[contains(@href, "image")]/@href'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'image1.html',</span>
<span class="go"> u'image2.html',</span>
<span class="go"> u'image3.html',</span>
<span class="go"> u'image4.html',</span>
<span class="go"> u'image5.html']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'a[href*=image]::attr(href)'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'image1.html',</span>
<span class="go"> u'image2.html',</span>
<span class="go"> u'image3.html',</span>
<span class="go"> u'image4.html',</span>
<span class="go"> u'image5.html']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//a[contains(@href, "image")]/img/@src'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'image1_thumb.jpg',</span>
<span class="go"> u'image2_thumb.jpg',</span>
<span class="go"> u'image3_thumb.jpg',</span>
<span class="go"> u'image4_thumb.jpg',</span>
<span class="go"> u'image5_thumb.jpg']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s">'a[href*=image] img::attr(src)'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'image1_thumb.jpg',</span>
<span class="go"> u'image2_thumb.jpg',</span>
<span class="go"> u'image3_thumb.jpg',</span>
<span class="go"> u'image4_thumb.jpg',</span>
<span class="go"> u'image5_thumb.jpg']</span>
</pre></div>
</div>
</div>
<div class="section" id="nesting-selectors">
<span id="topics-selectors-nesting-selectors"></span><h3>Nesting selectors<a class="headerlink" href="#nesting-selectors" title="Permalink to this headline">¶</a></h3>
<p>The selection methods (<tt class="docutils literal"><span class="pre">.xpath()</span></tt> or <tt class="docutils literal"><span class="pre">.css()</span></tt>) returns a list of selectors
of the same type, so you can call the selection methods for those selectors
too. Here’s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">links</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//a[contains(@href, "image")]'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">links</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'&lt;a href="image1.html"&gt;Name: My image 1 &lt;br&gt;&lt;img src="image1_thumb.jpg"&gt;&lt;/a&gt;',</span>
<span class="go"> u'&lt;a href="image2.html"&gt;Name: My image 2 &lt;br&gt;&lt;img src="image2_thumb.jpg"&gt;&lt;/a&gt;',</span>
<span class="go"> u'&lt;a href="image3.html"&gt;Name: My image 3 &lt;br&gt;&lt;img src="image3_thumb.jpg"&gt;&lt;/a&gt;',</span>
<span class="go"> u'&lt;a href="image4.html"&gt;Name: My image 4 &lt;br&gt;&lt;img src="image4_thumb.jpg"&gt;&lt;/a&gt;',</span>
<span class="go"> u'&lt;a href="image5.html"&gt;Name: My image 5 &lt;br&gt;&lt;img src="image5_thumb.jpg"&gt;&lt;/a&gt;']</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">link</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">links</span><span class="p">):</span>
<span class="go">        args = (index, link.xpath('@href').extract(), link.xpath('img/@src').extract())</span>
<span class="go">        print 'Link number %d points to url %s and image %s' % args</span>

<span class="go">Link number 0 points to url [u'image1.html'] and image [u'image1_thumb.jpg']</span>
<span class="go">Link number 1 points to url [u'image2.html'] and image [u'image2_thumb.jpg']</span>
<span class="go">Link number 2 points to url [u'image3.html'] and image [u'image3_thumb.jpg']</span>
<span class="go">Link number 3 points to url [u'image4.html'] and image [u'image4_thumb.jpg']</span>
<span class="go">Link number 4 points to url [u'image5.html'] and image [u'image5_thumb.jpg']</span>
</pre></div>
</div>
</div>
<div class="section" id="using-selectors-with-regular-expressions">
<h3>Using selectors with regular expressions<a class="headerlink" href="#using-selectors-with-regular-expressions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> also have a <tt class="docutils literal"><span class="pre">.re()</span></tt> method for extracting
data using regular expressions. However, unlike using <tt class="docutils literal"><span class="pre">.xpath()</span></tt> or
<tt class="docutils literal"><span class="pre">.css()</span></tt> methods, <tt class="docutils literal"><span class="pre">.re()</span></tt> method returns a list of unicode strings. So you
can’t construct nested <tt class="docutils literal"><span class="pre">.re()</span></tt> calls.</p>
<p>Here’s an example used to extract images names from the <a class="reference internal" href="#topics-selectors-htmlcode"><em>HTML code</em></a> above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//a[contains(@href, "image")]/text()'</span><span class="p">)</span><span class="o">.</span><span class="n">re</span><span class="p">(</span><span class="s">r'Name:\s*(.*)'</span><span class="p">)</span>
<span class="go">[u'My image 1',</span>
<span class="go"> u'My image 2',</span>
<span class="go"> u'My image 3',</span>
<span class="go"> u'My image 4',</span>
<span class="go"> u'My image 5']</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-relative-xpaths">
<span id="topics-selectors-relative-xpaths"></span><h3>Working with relative XPaths<a class="headerlink" href="#working-with-relative-xpaths" title="Permalink to this headline">¶</a></h3>
<p>Keep in mind that if you are nesting selectors and use an XPath that starts
with <tt class="docutils literal"><span class="pre">/</span></tt>, that XPath will be absolute to the document and not relative to the
<tt class="docutils literal"><span class="pre">Selector</span></tt> you’re calling it from.</p>
<p>For example, suppose you want to extract all <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> elements inside <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt>
elements. First, you would get all <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">divs</span> <span class="o">=</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div'</span><span class="p">)</span>
</pre></div>
</div>
<p>At first, you may be tempted to use the following approach, which is wrong, as
it actually extracts all <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> elements from the document, not only those
inside <tt class="docutils literal"><span class="pre">&lt;div&gt;</span></tt> elements:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//p'</span><span class="p">)</span>  <span class="c"># this is wrong - gets all &lt;p&gt; from the whole document</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>This is the proper way to do it (note the dot prefixing the <tt class="docutils literal"><span class="pre">.//p</span></tt> XPath):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'.//p'</span><span class="p">)</span>  <span class="c"># extracts all &lt;p&gt; inside</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>Another common case would be to extract all direct <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> children:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">divs</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'p'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
<p>For more details about relative XPaths see the <a class="reference external" href="http://www.w3.org/TR/xpath#location-paths">Location Paths</a> section in the
XPath specification.</p>
</div>
<div class="section" id="using-exslt-extensions">
<h3>Using EXSLT extensions<a class="headerlink" href="#using-exslt-extensions" title="Permalink to this headline">¶</a></h3>
<p>Being built atop <a class="reference external" href="http://codespeak.net/lxml/">lxml</a>, Scrapy selectors also support some <a class="reference external" href="http://www.exslt.org/">EXSLT</a> extensions
and come with these pre-registered namespaces to use in XPath expressions:</p>
<div class="wy-table-responsive"><table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="55%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">prefix</th>
<th class="head">namespace</th>
<th class="head">usage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>re</td>
<td><a class="reference external" href="http://exslt.org/regular-expressions">http://exslt.org/regular-expressions</a></td>
<td><a class="reference external" href="http://www.exslt.org/regexp/index.html">regular expressions</a></td>
</tr>
<tr class="row-odd"><td>set</td>
<td><a class="reference external" href="http://exslt.org/sets">http://exslt.org/sets</a></td>
<td><a class="reference external" href="http://www.exslt.org/set/index.html">set manipulation</a></td>
</tr>
</tbody>
</table></div>
<div class="section" id="regular-expressions">
<h4>Regular expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">test()</span></tt> function for example can prove quite useful when XPath’s
<tt class="docutils literal"><span class="pre">starts-with()</span></tt> or <tt class="docutils literal"><span class="pre">contains()</span></tt> are not sufficient.</p>
<p>Example selecting links in list item with a “class” attribute ending with a digit:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="s">"""</span>
<span class="gp">... </span><span class="s">&lt;div&gt;</span>
<span class="gp">... </span><span class="s">    &lt;ul&gt;</span>
<span class="gp">... </span><span class="s">        &lt;li class="item-0"&gt;&lt;a href="link1.html"&gt;first item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s">        &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s">        &lt;li class="item-inactive"&gt;&lt;a href="link3.html"&gt;third item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s">        &lt;li class="item-1"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s">        &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;</span>
<span class="gp">... </span><span class="s">    &lt;/ul&gt;</span>
<span class="gp">... </span><span class="s">&lt;/div&gt;</span>
<span class="gp">... </span><span class="s">"""</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">"html"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//li//@href'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'link1.html', u'link2.html', u'link3.html', u'link4.html', u'link5.html']</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//li[re:test(@class, "item-\d$")]//@href'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="go">[u'link1.html', u'link2.html', u'link4.html', u'link5.html']</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">C library <tt class="docutils literal"><span class="pre">libxslt</span></tt> doesn’t natively support EXSLT regular
expressions so <a class="reference external" href="http://codespeak.net/lxml/">lxml</a>‘s implementation uses hooks to Python’s <tt class="docutils literal"><span class="pre">re</span></tt> module.
Thus, using regexp functions in your XPath expressions may add a small
performance penalty.</p>
</div>
</div>
<div class="section" id="set-operations">
<h4>Set operations<a class="headerlink" href="#set-operations" title="Permalink to this headline">¶</a></h4>
<p>These can be handy for excluding parts of a document tree before
extracting text elements for example.</p>
<p>Example extracting microdata (sample content taken from <a class="reference external" href="http://schema.org/Product">http://schema.org/Product</a>)
with groups of itemscopes and corresponding itemprops:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">doc</span> <span class="o">=</span> <span class="s">"""</span>
<span class="gp">... </span><span class="s">&lt;div itemscope itemtype="http://schema.org/Product"&gt;</span>
<span class="gp">... </span><span class="s">  &lt;span itemprop="name"&gt;Kenmore White 17" Microwave&lt;/span&gt;</span>
<span class="gp">... </span><span class="s">  &lt;img src="kenmore-microwave-17in.jpg" alt='Kenmore 17" Microwave' /&gt;</span>
<span class="gp">... </span><span class="s">  &lt;div itemprop="aggregateRating"</span>
<span class="gp">... </span><span class="s">    itemscope itemtype="http://schema.org/AggregateRating"&gt;</span>
<span class="gp">... </span><span class="s">   Rated &lt;span itemprop="ratingValue"&gt;3.5&lt;/span&gt;/5</span>
<span class="gp">... </span><span class="s">   based on &lt;span itemprop="reviewCount"&gt;11&lt;/span&gt; customer reviews</span>
<span class="gp">... </span><span class="s">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">  &lt;div itemprop="offers" itemscope itemtype="http://schema.org/Offer"&gt;</span>
<span class="gp">... </span><span class="s">    &lt;span itemprop="price"&gt;$55.00&lt;/span&gt;</span>
<span class="gp">... </span><span class="s">    &lt;link itemprop="availability" href="http://schema.org/InStock" /&gt;In stock</span>
<span class="gp">... </span><span class="s">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">  Product description:</span>
<span class="gp">... </span><span class="s">  &lt;span itemprop="description"&gt;0.7 cubic feet countertop microwave.</span>
<span class="gp">... </span><span class="s">  Has six preset cooking categories and convenience features like</span>
<span class="gp">... </span><span class="s">  Add-A-Minute and Child Lock.&lt;/span&gt;</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">  Customer reviews:</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">  &lt;div itemprop="review" itemscope itemtype="http://schema.org/Review"&gt;</span>
<span class="gp">... </span><span class="s">    &lt;span itemprop="name"&gt;Not a happy camper&lt;/span&gt; -</span>
<span class="gp">... </span><span class="s">    by &lt;span itemprop="author"&gt;Ellie&lt;/span&gt;,</span>
<span class="gp">... </span><span class="s">    &lt;meta itemprop="datePublished" content="2011-04-01"&gt;April 1, 2011</span>
<span class="gp">... </span><span class="s">    &lt;div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating"&gt;</span>
<span class="gp">... </span><span class="s">      &lt;meta itemprop="worstRating" content = "1"&gt;</span>
<span class="gp">... </span><span class="s">      &lt;span itemprop="ratingValue"&gt;1&lt;/span&gt;/</span>
<span class="gp">... </span><span class="s">      &lt;span itemprop="bestRating"&gt;5&lt;/span&gt;stars</span>
<span class="gp">... </span><span class="s">    &lt;/div&gt;</span>
<span class="gp">... </span><span class="s">    &lt;span itemprop="description"&gt;The lamp burned out and now I have to replace</span>
<span class="gp">... </span><span class="s">    it. &lt;/span&gt;</span>
<span class="gp">... </span><span class="s">  &lt;/div&gt;</span>
<span class="gp">...</span><span class="s"></span>
<span class="gp">... </span><span class="s">  &lt;div itemprop="review" itemscope itemtype="http://schema.org/Review"&gt;</span>
<span class="gp">... </span><span class="s">    &lt;span itemprop="name"&gt;Value purchase&lt;/span&gt; -</span>
<span class="gp">... </span><span class="s">    by &lt;span itemprop="author"&gt;Lucas&lt;/span&gt;,</span>
<span class="gp">... </span><span class="s">    &lt;meta itemprop="datePublished" content="2011-03-25"&gt;March 25, 2011</span>
<span class="gp">... </span><span class="s">    &lt;div itemprop="reviewRating" itemscope itemtype="http://schema.org/Rating"&gt;</span>
<span class="gp">... </span><span class="s">      &lt;meta itemprop="worstRating" content = "1"/&gt;</span>
<span class="gp">... </span><span class="s">      &lt;span itemprop="ratingValue"&gt;4&lt;/span&gt;/</span>
<span class="gp">... </span><span class="s">      &lt;span itemprop="bestRating"&gt;5&lt;/span&gt;stars</span>
<span class="gp">... </span><span class="s">    &lt;/div&gt;</span>
<span class="gp">... </span><span class="s">    &lt;span itemprop="description"&gt;Great microwave for the price. It is small and</span>
<span class="gp">... </span><span class="s">    fits in my apartment.&lt;/span&gt;</span>
<span class="gp">... </span><span class="s">  &lt;/div&gt;</span>
<span class="gp">... </span><span class="s">  ...</span>
<span class="gp">... </span><span class="s">&lt;/div&gt;</span>
<span class="gp">... </span><span class="s">"""</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">scope</span> <span class="ow">in</span> <span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'//div[@itemscope]'</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">"current scope:"</span><span class="p">,</span> <span class="n">scope</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'@itemtype'</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">props</span> <span class="o">=</span> <span class="n">scope</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">'''</span>
<span class="gp">... </span><span class="s">                set:difference(./descendant::*/@itemprop,</span>
<span class="gp">... </span><span class="s">                               .//*[@itemscope]/*/@itemprop)'''</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">"    properties:"</span><span class="p">,</span> <span class="n">props</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">print</span>
<span class="gp">...</span>
<span class="go">current scope: [u'http://schema.org/Product']</span>
<span class="go">    properties: [u'name', u'aggregateRating', u'offers', u'description', u'review', u'review']</span>

<span class="go">current scope: [u'http://schema.org/AggregateRating']</span>
<span class="go">    properties: [u'ratingValue', u'reviewCount']</span>

<span class="go">current scope: [u'http://schema.org/Offer']</span>
<span class="go">    properties: [u'price', u'availability']</span>

<span class="go">current scope: [u'http://schema.org/Review']</span>
<span class="go">    properties: [u'name', u'author', u'datePublished', u'reviewRating', u'description']</span>

<span class="go">current scope: [u'http://schema.org/Rating']</span>
<span class="go">    properties: [u'worstRating', u'ratingValue', u'bestRating']</span>

<span class="go">current scope: [u'http://schema.org/Review']</span>
<span class="go">    properties: [u'name', u'author', u'datePublished', u'reviewRating', u'description']</span>

<span class="go">current scope: [u'http://schema.org/Rating']</span>
<span class="go">    properties: [u'worstRating', u'ratingValue', u'bestRating']</span>

<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Here we first iterate over <tt class="docutils literal"><span class="pre">itemscope</span></tt> elements, and for each one,
we look for all <tt class="docutils literal"><span class="pre">itemprops</span></tt> elements and exclude those that are themselves
inside another <tt class="docutils literal"><span class="pre">itemscope</span></tt>.</p>
</div>
</div>
</div>
<div class="section" id="module-scrapy.selector">
<span id="built-in-selectors-reference"></span><span id="topics-selectors-ref"></span><h2>Built-in Selectors reference<a class="headerlink" href="#module-scrapy.selector" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="scrapy.selector.Selector">
<em class="property">class </em><tt class="descclassname">scrapy.selector.</tt><tt class="descname">Selector</tt><big>(</big><em>response=None</em>, <em>text=None</em>, <em>type=None</em><big>)</big><a class="headerlink" href="#scrapy.selector.Selector" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> is a wrapper over response to select
certain parts of its content.</p>
<p><tt class="docutils literal"><span class="pre">response</span></tt> is a <a class="reference internal" href="request-response.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></tt></a> or
<a class="reference internal" href="request-response.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></tt></a> object that will be used for selecting and
extracting data.</p>
<p><tt class="docutils literal"><span class="pre">text</span></tt> is a unicode string or utf-8 encoded text for cases when a
<tt class="docutils literal"><span class="pre">response</span></tt> isn’t available. Using <tt class="docutils literal"><span class="pre">text</span></tt> and <tt class="docutils literal"><span class="pre">response</span></tt> together is
undefined behavior.</p>
<p><tt class="docutils literal"><span class="pre">type</span></tt> defines the selector type, it can be <tt class="docutils literal"><span class="pre">"html"</span></tt>, <tt class="docutils literal"><span class="pre">"xml"</span></tt> or <tt class="docutils literal"><span class="pre">None</span></tt> (default).</p>
<blockquote>
<div><blockquote>
<div><p>If <tt class="docutils literal"><span class="pre">type</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>, the selector automatically chooses the best type
based on <tt class="docutils literal"><span class="pre">response</span></tt> type (see below), or defaults to <tt class="docutils literal"><span class="pre">"html"</span></tt> in case it
is used together with <tt class="docutils literal"><span class="pre">text</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">type</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt> and a <tt class="docutils literal"><span class="pre">response</span></tt> is passed, the selector type is
inferred from the response type as follow:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">"html"</span></tt> for <a class="reference internal" href="request-response.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></tt></a> type</li>
<li><tt class="docutils literal"><span class="pre">"xml"</span></tt> for <a class="reference internal" href="request-response.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></tt></a> type</li>
<li><tt class="docutils literal"><span class="pre">"html"</span></tt> for anything else</li>
</ul>
</div></blockquote>
</div></blockquote>
<p>Otherwise, if <tt class="docutils literal"><span class="pre">type</span></tt> is set, the selector type will be forced and no
detection will occur.</p>
</div></blockquote>
<dl class="method">
<dt id="scrapy.selector.Selector.xpath">
<tt class="descname">xpath</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.xpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Find nodes matching the xpath <tt class="docutils literal"><span class="pre">query</span></tt> and return the result as a
<a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> instance with all elements flattened. List
elements implement <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> interface too.</p>
<p><tt class="docutils literal"><span class="pre">query</span></tt> is a string containing the XPATH query to apply.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.css">
<tt class="descname">css</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.css" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the given CSS selector and return a <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> instance.</p>
<p><tt class="docutils literal"><span class="pre">query</span></tt> is a string containing the CSS selector to apply.</p>
<p>In the background, CSS queries are translated into XPath queries using
<a class="reference external" href="https://pypi.python.org/pypi/cssselect/">cssselect</a> library and run <tt class="docutils literal"><span class="pre">.xpath()</span></tt> method.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.extract">
<tt class="descname">extract</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize and return the matched nodes as a list of unicode strings.
Percent encoded content is unquoted.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.re">
<tt class="descname">re</tt><big>(</big><em>regex</em><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.re" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the given regex and return a list of unicode strings with the
matches.</p>
<p><tt class="docutils literal"><span class="pre">regex</span></tt> can be either a compiled regular expression or a string which
will be compiled to a regular expression using <tt class="docutils literal"><span class="pre">re.compile(regex)</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.register_namespace">
<tt class="descname">register_namespace</tt><big>(</big><em>prefix</em>, <em>uri</em><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.register_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the given namespace to be used in this <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a>.
Without registering namespaces you can’t select or extract data from
non-standard namespaces. See examples below.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.remove_namespaces">
<tt class="descname">remove_namespaces</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.remove_namespaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all namespaces, allowing to traverse the document using
namespace-less xpaths. See example below.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.Selector.__nonzero__">
<tt class="descname">__nonzero__</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.Selector.__nonzero__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <tt class="docutils literal"><span class="pre">True</span></tt> if there is any real content selected or <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise.  In other words, the boolean value of a <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> is
given by the contents it selects.</p>
</dd></dl>

</dd></dl>

<div class="section" id="selectorlist-objects">
<h3>SelectorList objects<a class="headerlink" href="#selectorlist-objects" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="scrapy.selector.SelectorList">
<em class="property">class </em><tt class="descclassname">scrapy.selector.</tt><tt class="descname">SelectorList</tt><a class="headerlink" href="#scrapy.selector.SelectorList" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> class is subclass of the builtin <tt class="docutils literal"><span class="pre">list</span></tt>
class, which provides a few additional methods.</p>
<dl class="method">
<dt id="scrapy.selector.SelectorList.xpath">
<tt class="descname">xpath</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#scrapy.selector.SelectorList.xpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <tt class="docutils literal"><span class="pre">.xpath()</span></tt> method for each element in this list and return
their results flattened as another <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a>.</p>
<p><tt class="docutils literal"><span class="pre">query</span></tt> is the same argument as the one in <a class="reference internal" href="#scrapy.selector.Selector.xpath" title="scrapy.selector.Selector.xpath"><tt class="xref py py-meth docutils literal"><span class="pre">Selector.xpath()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.css">
<tt class="descname">css</tt><big>(</big><em>query</em><big>)</big><a class="headerlink" href="#scrapy.selector.SelectorList.css" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <tt class="docutils literal"><span class="pre">.css()</span></tt> method for each element in this list and return
their results flattened as another <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a>.</p>
<p><tt class="docutils literal"><span class="pre">query</span></tt> is the same argument as the one in <a class="reference internal" href="#scrapy.selector.Selector.css" title="scrapy.selector.Selector.css"><tt class="xref py py-meth docutils literal"><span class="pre">Selector.css()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.extract">
<tt class="descname">extract</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.SelectorList.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <tt class="docutils literal"><span class="pre">.extract()</span></tt> method for each element is this list and return
their results flattened, as a list of unicode strings.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.re">
<tt class="descname">re</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.SelectorList.re" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the <tt class="docutils literal"><span class="pre">.re()</span></tt> method for each element is this list and return
their results flattened, as a list of unicode strings.</p>
</dd></dl>

<dl class="method">
<dt id="scrapy.selector.SelectorList.__nonzero__">
<tt class="descname">__nonzero__</tt><big>(</big><big>)</big><a class="headerlink" href="#scrapy.selector.SelectorList.__nonzero__" title="Permalink to this definition">¶</a></dt>
<dd><p>returns True if the list is not empty, False otherwise.</p>
</dd></dl>

</dd></dl>

<div class="section" id="selector-examples-on-html-response">
<h4>Selector examples on HTML response<a class="headerlink" href="#selector-examples-on-html-response" title="Permalink to this headline">¶</a></h4>
<p>Here’s a couple of <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> examples to illustrate several concepts.
In all cases, we assume there is already an <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> instantiated with
a <a class="reference internal" href="request-response.html#scrapy.http.HtmlResponse" title="scrapy.http.HtmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">HtmlResponse</span></tt></a> object like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">html_response</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">Select all <tt class="docutils literal"><span class="pre">&lt;h1&gt;</span></tt> elements from a HTML response body, returning a list of
<a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> objects (ie. a <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> object):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//h1"</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Extract the text of all <tt class="docutils literal"><span class="pre">&lt;h1&gt;</span></tt> elements from a HTML response body,
returning a list of unicode strings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//h1"</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>         <span class="c"># this includes the h1 tag</span>
<span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//h1/text()"</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>  <span class="c"># this excludes the h1 tag</span>
</pre></div>
</div>
</li>
<li><p class="first">Iterate over all <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> tags and print their class attribute:</p>
<div class="highlight-python"><pre>for node in sel.xpath("//p"):
...    print node.xpath("@class").extract()</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="selector-examples-on-xml-response">
<h4>Selector examples on XML response<a class="headerlink" href="#selector-examples-on-xml-response" title="Permalink to this headline">¶</a></h4>
<p>Here’s a couple of examples to illustrate several concepts. In both cases we
assume there is already an <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> instantiated with a
<a class="reference internal" href="request-response.html#scrapy.http.XmlResponse" title="scrapy.http.XmlResponse"><tt class="xref py py-class docutils literal"><span class="pre">XmlResponse</span></tt></a> object like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">xml_response</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic">
<li><p class="first">Select all <tt class="docutils literal"><span class="pre">&lt;product&gt;</span></tt> elements from a XML response body, returning a list
of <a class="reference internal" href="#scrapy.selector.Selector" title="scrapy.selector.Selector"><tt class="xref py py-class docutils literal"><span class="pre">Selector</span></tt></a> objects (ie. a <a class="reference internal" href="#scrapy.selector.SelectorList" title="scrapy.selector.SelectorList"><tt class="xref py py-class docutils literal"><span class="pre">SelectorList</span></tt></a> object):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//product"</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Extract all prices from a <a class="reference external" href="http://base.google.com/support/bin/answer.py?hl=en&amp;answer=59461">Google Base XML feed</a> which requires registering
a namespace:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span><span class="o">.</span><span class="n">register_namespace</span><span class="p">(</span><span class="s">"g"</span><span class="p">,</span> <span class="s">"http://base.google.com/ns/1.0"</span><span class="p">)</span>
<span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//g:price"</span><span class="p">)</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="removing-namespaces">
<span id="id3"></span><h4>Removing namespaces<a class="headerlink" href="#removing-namespaces" title="Permalink to this headline">¶</a></h4>
<p>When dealing with scraping projects, it is often quite convenient to get rid of
namespaces altogether and just work with element names, to write more
simple/convenient XPaths. You can use the
<a class="reference internal" href="#scrapy.selector.Selector.remove_namespaces" title="scrapy.selector.Selector.remove_namespaces"><tt class="xref py py-meth docutils literal"><span class="pre">Selector.remove_namespaces()</span></tt></a> method for that.</p>
<p>Let’s show an example that illustrates this with Github blog atom feed.</p>
<p>First, we open the shell with the url we want to scrape:</p>
<div class="highlight-python"><pre>$ scrapy shell https://github.com/blog.atom</pre>
</div>
<p>Once in the shell we can try selecting all <tt class="docutils literal"><span class="pre">&lt;link&gt;</span></tt> objects and see that it
doesn’t work (because the Atom XML namespace is obfuscating those nodes):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//link"</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>But once we call the <a class="reference internal" href="#scrapy.selector.Selector.remove_namespaces" title="scrapy.selector.Selector.remove_namespaces"><tt class="xref py py-meth docutils literal"><span class="pre">Selector.remove_namespaces()</span></tt></a> method, all
nodes can be accessed directly by their names:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">remove_namespaces</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sel</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s">"//link"</span><span class="p">)</span>
<span class="go">[&lt;Selector xpath='//link' data=u'&lt;link xmlns="http://www.w3.org/2005/Atom'&gt;,</span>
<span class="go"> &lt;Selector xpath='//link' data=u'&lt;link xmlns="http://www.w3.org/2005/Atom'&gt;,</span>
<span class="go"> ...</span>
</pre></div>
</div>
<p>If you wonder why the namespace removal procedure is not always called, instead
of having to call it manually. This is because of two reasons which, in order
of relevance, are:</p>
<ol class="arabic simple">
<li>Removing namespaces requires to iterate and modify all nodes in the
document, which is a reasonably expensive operation to performs for all
documents crawled by Scrapy</li>
<li>There could be some cases where using namespaces is actually required, in
case some element names clash between namespaces. These cases are very rare
though.</li>
</ol>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="loaders.html" class="btn btn-neutral float-right" title="Item Loaders">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="spiders.html" class="btn btn-neutral" title="Spiders"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr /><div><div id="rtd-fljd7m4g" class="ethical-rtd"></div></div>

  <div role="contentinfo">
    <p>
        © Copyright 2008-2013, Scrapy developers.
      Last updated on Jan 17, 2014.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="icon icon-book"> Read the Docs</span>
      v: 0.22 
      <span class="icon icon-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/0.22/">0.22</a></dd>
        
          <dd><a href="/en/0.20/">0.20</a></dd>
        
          <dd><a href="/en/0.18/">0.18</a></dd>
        
          <dd><a href="/en/0.16/">0.16</a></dd>
        
          <dd><a href="/en/0.14/">0.14</a></dd>
        
          <dd><a href="/en/0.12/">0.12</a></dd>
        
          <dd><a href="/en/0.10.3/">0.10.3</a></dd>
        
          <dd><a href="/en/0.9/">0.9</a></dd>
        
          <dd><a href="/en/0.8/">0.8</a></dd>
        
          <dd><a href="/en/0.7/">0.7</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://media.readthedocs.org/pdf/scrapy/0.22/scrapy.pdf">PDF</a></dd>
        
          <dd><a href="https://media.readthedocs.org/htmlzip/scrapy/0.22/scrapy.zip">HTML</a></dd>
        
          <dd><a href="https://media.readthedocs.org/epub/scrapy/0.22/scrapy.epub">Epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/scrapy/?fromdocs=scrapy">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/scrapy/?fromdocs=scrapy">Builds</a>
          </dd>
      </dl>
      <hr />
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



<div id="rtd-806lrvur"></div></body></html>